<!DOCTYPE html>
<html style="height: 300%">
   <head>
       <meta charset="utf-8">
   </head>
   <body style="height: 100%; margin: 0">
       <div id="container" style="height: 100%"></div>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-stat/dist/ecStat.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/dataTool.min.js"></script>
       <script src='./echarts-wordcloud.js'></script>
       <script type="text/javascript">
       
var dom = document.getElementById("container");
var myChart = echarts.init(dom);
var app = {};
option = null;
var xAxisData = [];
var data1 = [];
var data2 = [];
var data3 = [];
var data4 = [];
var data5 = [];
var data6 = [];
var data7 = [];
var data8 = [];
var data9 = [];
var data0 = [];


for (var i = 0; i < 100; i++) {
    xAxisData.push(i);
    data1.push((Math.random() * 33).toFixed(2));
    data2.push((Math.random() * 33).toFixed(2));
    data3.push(99.99 - data1[i] - data2[i]);
    
    data4.push((Math.random() * 33).toFixed(2));
    data5.push((Math.random() * 33).toFixed(2));
    data6.push(99.99 - data4[i] - data5[i]);
    
    data7.push((Math.random() * 30 + 10).toFixed(2));
    data8.push((Math.random() * 30 + 5).toFixed(2));
    
    if(Math.random() > 0.5){
        data9.push((Math.random() * 33).toFixed(2))
        data0.push('-')
    }else{
        data0.push((Math.random() * 33).toFixed(2))
        data9.push('-')
    }
}

var emphasisStyle = {
    itemStyle: {
        barBorderWidth: 1,
        shadowBlur: 10,
        shadowOffsetX: 0,
        shadowOffsetY: 0,
        shadowColor: 'rgba(0,0,0,0.5)'
    }
};

option = {
    backgroundColor: 'rgb(46,47,51)',
    dataZoom: {
            show: true,
            // x datazoom bar 开始/结束的位置
            start: 0,
            end: 100,
            // x datazoom bar 时间轴的位置
            top: 710,
            height: 25,
            left: 90,
            right: 90,
            xAxisIndex: [0, 1, 2],
        },
    title: [
        {
            text: 'Social web influence on 2016 US president election',
            textStyle:{
                color: '#eee',
                fontSize: 40
            },
            left: 'center',
            align: 'right',
        },
        {
            text: 'Election estimation and Candidates Heats',
            textStyle:{
                color: '#eee',
                fontSize: 30
            },
            top: 80,
            left: 'center',
            align: 'right',
        },
        {
            text: 'Election setiment analysis',
            textStyle:{
                color: '#eee',
                fontSize: 30
            },
            top: 395,
            left: 'center',
            align: 'right',
        },
        {
            text: 'Candidates word cloud analysis',
            textStyle:{
                color: '#eee',
                fontSize: 30
            },
            top: 755,
            left: 'center',
            align: 'right',
        }
    ],
    legend: [
        {
            data: ['Hillary wins (Support Ratio)', 'Trump wins (Support Ratio)', 'Hillary heats', 'Trump heats'],
            textStyle:{
                color: "#fff",
                
            },
            top: 350
        },
        {
            data: ['Positive', 'Neutral', 'Negative'],
            textStyle:{
                color: "#fff",
                
            },
            top: 665
        }
    ],
    // 是否显示右上角的toolbox
    toolbox: {show: false},
    // Hover bar的时候是否显示数据
    tooltip: {},
    xAxis: [{
        data: xAxisData,
        type: 'category',
        gridIndex:0,
        axisLine: {
            onZero: true,
            lineStyle: {
                    color: '#eee'
                }
        },

        splitLine: {show: false},
    },
    {
        data: xAxisData,
        type: 'category',
        gridIndex:1,
        axisLine: {
            onZero: true,
            lineStyle: {
                    color: '#eee'
                }
        },
        show: false,
        splitLine: {show: true},
    },
    {
        data: xAxisData,
        type: 'category',
        
        gridIndex:2,
        axisLine: {
            onZero: true,
            lineStyle: {
                    color: '#eee'
                }
        },
        splitLine: {show: false},
    }
    ],
    yAxis: [
        {
            type: 'value',
            name: 'Heats',
            nameLocation: 'center',
            nameTextStyle:{
                padding : [10, 10, 10, 10]
            }, 
            splitLine: {show: false},
            min: 0,
            max: 60,
            position: 'left',
            axisLine: {
                lineStyle: {
                    color: '#eee'
                }
            },
            // axisLabel: {
            //     formatter: '{value} °C'
            // }
        },
        {
            type: 'value',
            name: 'Estimation',
            nameLocation: 'center',
            nameTextStyle:{
                padding : [10, 10, 10, 10]
            }, 
            splitLine: {show: false},
            min: 0,
            max: 100,
            axisLine: {
                lineStyle: {
                    color: '#eee'
                }
            },
            position: 'right',
            // axisLabel: {
            //     formatter: '{value} °C'
            // }
        },
        {
            name: 'Hillary',
            nameLocation: 'top',
            nameTextStyle:{
                padding : [0, 0, 0, 70],
                color: "red",
                fontSize: "20"
            }, 
            splitArea: {show: false},
            splitLine: {show: false},
            axisLine: {show: false},
            axisLabel: {show: false},
            show: true,
            gridIndex:1,
            position: 'right',
        },
        {
            name: 'Trump',
            nameLocation: 'top',
            nameTextStyle:{
                padding : [0, 0, 0, 70],
                color: "blue",
                fontSize: "20"
            }, 
            splitArea: {show: false},
            splitLine: {show: false},
            axisLine: {show: false},
            axisLabel: {show: false},
            show: true,
            gridIndex:2,
            position: 'right',
        }
        
    ],
    grid: [{
        // Chart position
        left: 90,
        right: 90,
        top: 130,
        // Chart size
        height: 200
    },
    {
        left: 90,
        right: 90,
        top: 445,
        height: 100
    },
    {
        left: 90,
        right: 90,
        //Kai Grid的高
        top: 545,
        height: 100
    }
    ],
    visualMap: [
        {
            type: 'continuous',
            dimension: 1,
            // text: ['High', 'Low'],
            // itemHeight: "50%",
            calculable: true,
            min: 0,
            max: 100,
            left: 10,
            itemHeight: "80%",
            top: 445,
            inRange: {
                colorLightness: [0.48, 0.8]
            },
            outOfRange: {
                color: '#bbb'
            },
            controller: {
                inRange: {
                    color: 'red'
                }
            },
            seriesIndex: [0, 1, 2]
        },
        {
            type: 'continuous',
            dimension: 1,
            // text: ['High', 'Low'],
            // itemHeight: "50%",
            calculable: true,
            min: 0,
            max: 100,
            left: 10,
            itemHeight: "80%",
            top: 545,
            inRange: {
                colorLightness: [0.48, 0.8]
            },
            outOfRange: {
                color: '#bbb'
            },
            controller: {
                inRange: {
                    color: 'blue'
                }
            },
            seriesIndex: [3, 4, 5]
        }
    ],
    graphic: [
        {
            type: 'text',
                    z: 200,
                    left: '15%',
                    top: '805',
                    style: {
                        fill: 'red',
                        text: 'Hillary\'s word cloud',
                        font: '14px Microsoft YaHei',
                        fontSize: 25,
                        
                    },
        },
        {
            type: 'text',
                    z: 200,
                    left: '65%',
                    top: '805',
                    style: {
                        fill: 'blue',
                        text: 'Trump\'s word cloud',
                        font: '14px Microsoft YaHei',
                        fontSize: 25,
                        color: "blue"
                    }
        }
    ],
    series: [
        
        {
            name: 'Positive',
            xAxisIndex: 1,
            yAxisIndex: 2,
            type: 'bar',
            stack: 'one',
            barCategoryGap: 0,
            barGap: 0,
            emphasis: emphasisStyle,
            data: data1
        },
        {
            name: 'Neutral',
            xAxisIndex: 1,
            yAxisIndex: 2,
            type: 'bar',
            stack: 'one',
            barCategoryGap: 0,
            barGap: 0,
            emphasis: emphasisStyle,
            data: data2
        },
        {
            name: 'Negative',
            xAxisIndex: 1,
            yAxisIndex: 2,
            type: 'bar',
            stack: 'one',
            barCategoryGap: 0,
            barGap: 0,
            emphasis: emphasisStyle,
            data: data3
        },
        {
            name: 'Positive',
            xAxisIndex: 2,
            yAxisIndex: 3,
            type: 'bar',
            stack: 'two',
            barCategoryGap: 0,
            barGap: 0,
            emphasis: emphasisStyle,
            data: data4
        },
        {
            name: 'Neutral',
            xAxisIndex: 2,
            yAxisIndex: 3,
            type: 'bar',
            stack: 'two',
            barCategoryGap: 0,
            barGap: 0,
            emphasis: emphasisStyle,
            data: data5
        },
        {
            name: 'Negative',
            xAxisIndex: 2,
            yAxisIndex: 3,
            type: 'bar',
            stack: 'two',
            barCategoryGap: 0,
            barGap: 0,
            emphasis: emphasisStyle,
            data: data6
        }
        ,
        {
            name: 'Hillary heats',
            xAxisIndex: 0,
            yAxisIndex: 0,
            type: 'line',
            // stack: 'two',
            emphasis: emphasisStyle,
            data: data7
        }
        ,
        {
            name: 'Trump heats',
            xAxisIndex: 0,
            yAxisIndex: 0,
            type: 'line',
            // stack: 'two',
            emphasis: emphasisStyle,
            data: data8
        },
        {
            name: 'Hillary wins (Support Ratio)',
            xAxisIndex: 0,
            yAxisIndex: 1,
            type: 'bar',
            color: "red",
            stack: 'three',
            emphasis: emphasisStyle,
            data: data9
        },
        {
            name: 'Trump wins (Support Ratio)',
            xAxisIndex: 0,
            yAxisIndex: 1,
            type: 'bar',
            color: "blue",
            stack: 'three',
            emphasis: emphasisStyle,
            data: data0
        },

        {
                type: 'wordCloud',
                gridSize: 3,
                sizeRange: [12, 50],
                rotationRange: [-30,30],
                // shape: 'pentagon',
                                    // width: "100%",
                height: 400,
                width: "40%",
                left: "5%",
                top: 825,
                drawOutOfBound: true,
                textStyle: {
                    normal: {
                        color: function () {
                            return 'rgb(' + [
                                Math.round(Math.random() * 200+50),
                                Math.round(Math.random() * 200+50),
                                Math.round(Math.random() * 200+50)
                            ].join(',') + ')';
                        }
                    },
                    emphasis: {
                        shadowBlur: 3,
                        shadowColor: '#333'
                    }
                },
                data: [
                        {
                            name: 'Sam S Club',
                            value: 2467,
                            textStyle: {
                                normal: {
                                    color: 'black'
                                },
                                emphasis: {
                                    color: 'red'
                                }
                            },
                        },
                        {
                            name: 'Macys',
                            value: 2467
                        },
                        {
                            name: 'Amy Schumer',
                            value: 2467
                        },
                        {
                            name: 'Jurassic World',
                            value: 2467
                        },
                        {
                            name: 'Charter Communications',
                            value: 2467
                        },
                        {
                            name: 'Chick Fil A',
                            value: 2244
                        },
                        {
                            name: 'Planet Fitness',
                            value: 1898
                        },
                        {
                            name: 'Pitch Perfect',
                            value: 1484
                        },
                        {
                            name: 'Express',
                            value: 1112
                        },
                        {
                            name: 'Home',
                            value: 965
                        },
                        {
                            name: 'Johnny Depp',
                            value: 847
                        },
                        {
                            name: 'Lena Dunham',
                            value: 582
                        },
                        {
                            name: 'Lewis Hamilton',
                            value: 555
                        },
                        {
                            name: 'KXAN',
                            value: 550
                        },
                        {
                            name: 'Mary Ellen Mark',
                            value: 462
                        },
                        {
                            name: 'Farrah Abraham',
                            value: 366
                        },
                        {
                            name: 'Rita Ora',
                            value: 360
                        },
                        {
                            name: 'Serena Williams',
                            value: 282
                        },
                        {
                            name: 'NCAA baseball tournament',
                            value: 273
                        },
                        {
                            name: 'Point Break',
                            value: 265
                        }
                    ]
            } ,
            {
                type: 'wordCloud',
                gridSize: 3,
                sizeRange: [12, 50],
                rotationRange: [-30,30],
                // shape: 'pentagon',
                                    // width: "100%",
                height: 400,
                width: "40%",
                left: "55%",
                top: 825,
                drawOutOfBound: true,
                textStyle: {
                    normal: {
                        color: function () {
                            return 'rgb(' + [
                                Math.round(Math.random() * 200+50),
                                Math.round(Math.random() * 200+50),
                                Math.round(Math.random() * 200+50)
                            ].join(',') + ')';
                        }
                    },
                    emphasis: {
                        shadowBlur: 3,
                        shadowColor: '#333'
                    }
                },
                data: [
                        {
                            name: 'Sam S Club',
                            value: 2467,
                            textStyle: {
                                normal: {
                                    color: 'black'
                                },
                                emphasis: {
                                    color: 'red'
                                }
                            },
                        },
                        {
                            name: 'Macys',
                            value: 2467
                        },
                        {
                            name: 'Amy Schumer',
                            value: 2467
                        },
                        {
                            name: 'Jurassic World',
                            value: 2467
                        },
                        {
                            name: 'Charter Communications',
                            value: 2467
                        },
                        {
                            name: 'Chick Fil A',
                            value: 2244
                        },
                        {
                            name: 'Planet Fitness',
                            value: 1898
                        },
                        {
                            name: 'Pitch Perfect',
                            value: 1484
                        },
                        {
                            name: 'Express',
                            value: 1112
                        },
                        {
                            name: 'Home',
                            value: 965
                        },
                        {
                            name: 'Johnny Depp',
                            value: 847
                        },
                        {
                            name: 'Lena Dunham',
                            value: 582
                        },
                        {
                            name: 'Lewis Hamilton',
                            value: 555
                        },
                        {
                            name: 'KXAN',
                            value: 550
                        },
                        {
                            name: 'Mary Ellen Mark',
                            value: 462
                        },
                        {
                            name: 'Farrah Abraham',
                            value: 366
                        },
                        {
                            name: 'Rita Ora',
                            value: 360
                        },
                        {
                            name: 'Serena Williams',
                            value: 282
                        },
                        {
                            name: 'NCAA baseball tournament',
                            value: 273
                        },
                        {
                            name: 'Point Break',
                            value: 265
                        }
                    ]
            } 
        
    ]
};
;


myChart.on("click", function(param){
    if(param.componentSubType == "wordCloud"){
        console.log(param.data);
        console.log(param.seriesName);
        console.log(param);
        url = "https://en.wikipedia.org/wiki/" + param.data.name
        url = url.replace(" ", "_")
        var win = window.open(url);
    }
});

if (option && typeof option === "object") {
    myChart.setOption(option, true);
}
       </script>
   </body>
</html>

<!-- chart_1_chart.showLoading(); -->
<!-- chart_1_chart.hideLoading(); -->